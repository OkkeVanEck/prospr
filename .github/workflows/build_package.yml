name: Build Package

on:
    push:
        branches: [ master ]
    pull_request:
        branches: [ master ]

jobs:
    build:
        needs: syntax_check
        runs-on: ${{ matrix.os }}
        strategy:
            matrix:
                os: [ubuntu-latest, windows-latest, macos-latest]
                python-version: [3.6]
        steps:
            - uses: actions/checkout@v2

            - name: Set up Python ${{ matrix.python-version }}
                uses: actions/setup-python@v2
                with:
                    python-version: ${{ matrix.python-version }}

            - name: Install dependencies
                run: |
                    python -m pip install --upgrade pip
                    if [ -f requirements.txt ]; then pip install -r requirements.txt; fi

            - name: Build wheels
              uses: joerick/cibuildwheel@v1.10.0
                    # to supply options, put them in 'env', like:
                    # env:
                    #   CIBW_SOME_OPTION: value

            - uses: actions/upload-artifact@v2
                  with:
                      path: ./wheelhouse/*.whl

#    test:
#        needs: build
#        runs-on: ${{ matrix.os }}
#        strategy:
#            matrix:
#                os: [ubuntu-latest, windows-latest, macos-latest]
#                python-version: [3.6]
#        steps:
#            - uses: actions/checkout@v2
#
#            -   name: Set up Python ${{ matrix.python-version }}
#                    uses: actions/setup-python@v2
#                    with:
#                        python-version: ${{ matrix.python-version }}
#
#            -   name: Install dependencies
#                    run: |
#                        python -m pip install --upgrade pip
#                        python -m pip install pytest
#                        if [ -f requirements.txt ]; then pip install -r requirements.txt; fi
#
#            - name: Test with pytest
#              run: |
#                  pytest

#    deploy:
#        needs: [syntax_check, build, test]
#        runs-on: ubuntu-latest
